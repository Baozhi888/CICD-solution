# =============================================================================
# ShellCheck 配置文件
# =============================================================================
# 此文件定义了项目级别的 ShellCheck 检查规则
# 将此文件放置在项目根目录，ShellCheck 将自动使用这些设置
#
# 文档: https://www.shellcheck.net/wiki/
# =============================================================================

# 使用 bash 作为默认 shell
shell=bash

# =============================================================================
# 启用的检查
# =============================================================================
# 默认启用所有检查，下面仅列出需要禁用的规则

# =============================================================================
# 禁用的检查（带理由说明）
# =============================================================================

# SC1090: 无法追踪动态 source 的文件
# 原因: 我们使用动态路径加载核心库，这是设计需要
disable=SC1090

# SC1091: 无法打开 source 的文件
# 原因: 在开发环境中，某些库文件可能不存在于检查路径中
disable=SC1091

# SC2034: 变量看起来未使用
# 原因: 我们定义的颜色变量和配置变量可能在其他脚本中使用
# 注意: 尽量使用 export 或在变量名前加下划线来明确意图
# disable=SC2034  # 保持启用，鼓励清理未使用变量

# SC2155: 在同一语句中声明和赋值可能掩盖返回值
# 原因: 这是常见模式，但可能导致错误被忽略
# 建议: 不禁用，改进代码以分开声明和赋值
# disable=SC2155

# =============================================================================
# 外部命令声明
# =============================================================================
# 声明项目中使用的外部命令，避免 SC2154 警告

# 常用工具
external-sources=true

# =============================================================================
# 源文件路径
# =============================================================================
# 帮助 ShellCheck 找到 source 的文件
source-path=SCRIPTDIR
source-path=SCRIPTDIR/../lib
source-path=SCRIPTDIR/../lib/core
source-path=SCRIPTDIR/../lib/utils

# =============================================================================
# 严重性级别
# =============================================================================
# 可选值: error, warning, info, style
# 设置最低报告级别
severity=style

# =============================================================================
# 注意事项
# =============================================================================
# 1. 在脚本中可以使用 # shellcheck disable=SCXXXX 来临时禁用特定规则
# 2. 推荐在 CI/CD 中运行: shellcheck -x scripts/*.sh lib/**/*.sh
# 3. 使用 -f json 输出格式便于集成到 CI 报告中
